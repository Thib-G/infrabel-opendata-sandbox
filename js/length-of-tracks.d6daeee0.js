(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["length-of-tracks"],{"1bec":function(t,e,r){},"3b5f":function(t,e,r){"use strict";var n=r("1bec"),a=r.n(n);a.a},"436c":function(t,e,r){var n=r("1b55")("iterator"),a=!1;try{var i=[7][n]();i["return"]=function(){a=!0},Array.from(i,function(){throw 2})}catch(o){}t.exports=function(t,e){if(!e&&!a)return!1;var r=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:r=!0}},i[n]=function(){return s},t(i)}catch(o){}return r}},"57f7":function(t,e,r){r("93c4"),r("6109"),t.exports=r("a7d3").Array.from},6109:function(t,e,r){"use strict";var n=r("bc25"),a=r("d13f"),i=r("0185"),o=r("9c93"),s=r("c227"),c=r("a5ab"),h=r("b3ec"),u=r("f159");a(a.S+a.F*!r("436c")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,a,l,p=i(t),f="function"==typeof this?this:Array,g=arguments.length,d=g>1?arguments[1]:void 0,v=void 0!==d,m=0,b=u(p);if(v&&(d=n(d,g>2?arguments[2]:void 0,2)),void 0==b||f==Array&&s(b))for(e=c(p.length),r=new f(e);e>m;m++)h(r,m,v?d(p[m],m):p[m]);else for(l=b.call(p),r=new f;!(a=l.next()).done;m++)h(r,m,v?o(l,d,[a.value,m],!0):a.value);return r.length=m,r}})},"774e":function(t,e,r){t.exports=r("57f7")},"89ca":function(t,e,r){r("b42c"),r("93c4"),t.exports=r("d38f")},"9c93":function(t,e,r){var n=r("0f89");t.exports=function(t,e,r,a){try{return a?e(n(r)[0],r[1]):e(r)}catch(o){var i=t["return"];throw void 0!==i&&n(i.call(t)),o}}},b3ec:function(t,e,r){"use strict";var n=r("3adc"),a=r("f845");t.exports=function(t,e,r){e in t?n.f(t,e,a(0,r)):t[e]=r}},c227:function(t,e,r){var n=r("b22a"),a=r("1b55")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||i[a]===t)}},c845:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",[t._v("\n    This visualisation animates the top longest main tracks.\n    "),r("br"),t._v("Click "),r("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.animate(e)}}},[t._v("Play")]),t._v(".\n  ")]),t.geojson&&t.regions?r("LengthOfTracksGeo",{ref:"geo",attrs:{geojson:t.geojson,regions:t.regions}}):t._e(),r("div",[r("button",{on:{click:t.animate}},[t._v("Play")])]),r("h3",[t._v("Sources")]),t._m(0),r("p",[t._v("The dataset was simplified using QGIS with the Douglas-Peucker\n    algorithm and a precision of 50m.")]),t._m(1)],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v("Infrabel Open Data: « "),r("a",{attrs:{href:"https://opendata.infrabel.be/explore/dataset/geovoies/",target:"_blank"}},[t._v("Liste\n    et position géographique des voies principales")]),t._v(" ».")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v("Atlas de Belgique: "),r("a",{attrs:{href:"http://www.atlas-belgique.be/cms2/index.php?page=cartodata_fr",target:"_blank"}},[t._v("régions")]),t._v(".")])}],i=r("375a"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{ref:"svg",attrs:{width:t.width,height:t.height}},[r("rect",{staticClass:"bg",attrs:{x:"0",y:"0",rx:"20",ry:"20",width:t.width,height:t.height}}),r("g",{staticClass:"g-map"},[r("g",[r("path",{staticClass:"regions",attrs:{d:t.regionsPath}})]),r("g",{ref:"map"})]),r("g",{ref:"chart",staticClass:"g-chart"},[r("text",{attrs:{x:t.margin.left,y:t.margin.top-10}},[t._v("Top "+t._s(t.nr))])])])},s=[],c=(r("ac6a"),r("a745")),h=r.n(c);function u(t){if(h()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var l=r("774e"),p=r.n(l),f=r("c8bb"),g=r.n(f);function d(t){if(g()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return p()(t)}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){return u(t)||d(t)||v()}r("55dd");var b=r("5d7f"),y={props:{geojson:{type:Object,required:!0},regions:{type:Object,required:!0}},data:function(){return{width:1e3,height:600,chartWidth:300,chartHeight:550,margin:{top:30,right:20,bottom:20,left:100},center:b["a"].geoCentroid(this.geojson),nr:40,pathFnNr:0,mapScale:1e4,delay:60,duration:4e3}},mounted:function(){this.init()},computed:{projection:function(){return b["a"].geoMercator().center(this.center).scale(this.mapScale).translate([this.width/2+this.margin.left+30,this.height/2-50])},pathGeo:function(){return b["a"].geoPath().projection(this.projection)},topFeatures:function(){var t=this;return m(this.geojson.features).sort(function(t,e){return e.properties.length-t.properties.length}).filter(function(e,r){return r<t.nr})},scale:function(){var t=b["a"].scaleLinear().range([0,this.chartWidth]).domain([0,Math.max.apply(Math,m(this.topFeatures.map(function(t){return t.properties.length})))]),e=b["a"].scaleBand().range([0,this.chartHeight]).domain(this.topFeatures.map(function(t){return t.properties.trackcode})).padding(.1),r=b["a"].scaleSequential(b["a"].interpolateYlOrBr).domain([0,Math.max.apply(Math,m(this.topFeatures.map(function(t){return t.properties.length})))]);return{x:t,y:e,color:r}},pathFn:function(){return 0===this.pathFnNr?this.pathHistogram:this.pathGeo},regionsPath:function(){return this.pathGeo(this.regions)}},methods:{init:function(){var t=this;b["a"].select(this.$refs.map).selectAll("path.track").data(this.geojson.features).enter().append("path").attr("class","track").attr("d",this.pathGeo).on("mouseover",this.highlight).on("mouseout",this.unhighlight),b["a"].select(this.$refs.chart).selectAll("path.chart-bg").data(this.topFeatures).enter().append("path").attr("class","chart-bg").attr("d",this.pathHistogramBg).on("mouseover",this.highlight).on("mouseout",this.unhighlight),b["a"].select(this.$refs.chart).selectAll("path.chart").data(this.topFeatures).enter().append("path").attr("class","chart").style("stroke",function(e){return t.scale.color(e.properties.length)}).attr("d",this.pathHistogram).on("mouseover",this.highlight).on("mouseout",this.unhighlight),b["a"].select(this.$refs.chart).selectAll("text.chart-text").data(this.topFeatures).enter().append("text").attr("class","chart-text").attr("x",this.margin.left-4).attr("y",function(e){return t.margin.top+t.scale.y(e.properties.trackcode)+t.scale.y.bandwidth()/2+3}).text(function(t){return"".concat(t.properties.trackcode," (").concat(Math.round(t.properties.length/1e3)," km)")}).on("mouseover",this.highlight).on("mouseout",this.unhighlight)},pathHistogramBg:function(t){var e=this.margin.left,r=this.margin.left+this.scale.x(t.properties.length),n=this.margin.top+this.scale.y(t.properties.trackcode)+this.scale.y.bandwidth()/2;return"M".concat(e," ").concat(n,"L").concat(r," ").concat(n)},pathHistogram:function(t){var e=this,r=[].concat.apply([],t.geometry.coordinates),n=this.scale.x(t.properties.length),a=this.margin.top+this.scale.y(t.properties.trackcode)+this.scale.y.bandwidth()/2,i="",o=0,s="".concat(this.margin.left," ").concat(a);return t.geometry.coordinates.forEach(function(t){i+="M".concat(s),t.forEach(function(t,c){s="".concat(e.margin.left+n*(o+1)/r.length," ").concat(a),0!==c&&(i+="L".concat(s)),o+=1})}),i},animate:function(){var t=this;this.pathFnNr=(this.pathFnNr+1)%2,b["a"].select(this.$refs.chart).selectAll("path.chart").transition().duration(this.duration).delay(function(e,r,n){return 1===t.pathFnNr?r*t.delay:(n.length-1-r)*t.delay}).attr("d",this.pathFn)},highlight:function(t){b["a"].select(this.$refs.svg).selectAll("path.chart, text.chart-text, path.track").filter(function(e){return e.properties.trackcode===t.properties.trackcode}).classed("highlighted",!0)},unhighlight:function(){b["a"].select(this.$refs.svg).selectAll("path.chart, text.chart-text, path.track").classed("highlighted",!1)}}},x=y,_=(r("3b5f"),r("2877")),k=Object(_["a"])(x,o,s,!1,null,"a79da186",null),w=k.exports,j={data:function(){return{infrabelService:i["a"],geojson:void 0,regions:void 0}},created:function(){this.getGeoTracks(),this.getRegions()},methods:{getGeoTracks:function(){var t=this;this.infrabelService.getGeoTracks().then(function(e){t.geojson=e})},getRegions:function(){var t=this;this.infrabelService.getRegions().then(function(e){t.regions=e})},animate:function(){this.$refs.geo.animate()}},components:{LengthOfTracksGeo:w}},A=j,F=Object(_["a"])(A,n,a,!1,null,null,null);e["default"]=F.exports},c8bb:function(t,e,r){t.exports=r("89ca")},d38f:function(t,e,r){var n=r("7d8a"),a=r("1b55")("iterator"),i=r("b22a");t.exports=r("a7d3").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(n(e))}}}]);
//# sourceMappingURL=length-of-tracks.d6daeee0.js.map